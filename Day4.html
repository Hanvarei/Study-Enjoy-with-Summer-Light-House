<intex.html></intex.html>
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Day 4 Flashcards</title>

<style>
    body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #f3e5d8;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px 10px 40px;
        margin: 0;
    }

    h1 {
        margin-bottom: 10px;
        text-align: center;
        font-size: 2rem;
        font-weight: 700;
    }

    .card {
        width: 330px;
        min-height: 160px;
        background: #e8cfae;
        color: #333;
        border-radius: 18px;
        padding: 20px;
        text-align: center;
        margin-bottom: 20px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.15);
        display: flex;
        flex-direction: column;
        justify-content: center;
        transition: background 0.4s ease, transform 0.2s ease;
        cursor: pointer;
    }

    .card.bounce {
        animation: bounce 0.18s ease;
    }

    @keyframes bounce {
        0%   { transform: scale(1); }
        50%  { transform: scale(0.97); }
        100% { transform: scale(1); }
    }

    .label {
        font-size: 0.9rem;
        margin-bottom: 6px;
        opacity: 0.85;
    }

    #text-main {
        font-size: 1.7rem;
        margin-bottom: 8px;
    }

    #text-sub {
        font-size: 1rem;
        opacity: 0.9;
    }

    .audio-buttons,
    .buttons {
        display: flex;
        gap: 10px;
        margin-bottom: 10px;
        flex-wrap: wrap;
        justify-content: center;
    }

    button {
        border: none;
        border-radius: 999px;
        padding: 8px 14px;
        font-size: 0.9rem;
        cursor: pointer;
        background: #007bff;
        color: white;
        transition: transform 0.1s ease, box-shadow 0.1s ease, background 0.15s ease;
    }

    button.secondary {
        background: #ffb703;
        color: #333;
    }

    button:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    .nav-btn {
        min-width: 90px;
    }

    #counter {
        font-size: 0.85rem;
        color: #555;
        margin-bottom: 10px;
    }

    .auto-options {
        font-size: 0.8rem;
        color: #444;
        margin-bottom: 18px;
    }

    .auto-options label {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        cursor: pointer;
    }

    /* Quiz */
    .question {
        background: white;
        padding: 16px 18px;
        margin: 10px 0;
        border-radius: 12px;
        box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        max-width: 420px;
        width: 100%;
    }

    .question p {
        margin: 6px 0;
    }

    .choice-btn {
        display: block;
        width: 100%;
        margin: 6px 0;
        padding: 12px;
        border-radius: 8px;
        background: wheat;
        color: #222;
        border: none;
        text-align: left;
        cursor: pointer;
        font-size: 0.95rem;
    }

    .choice-btn.correct {
        background: #90EE90 !important;
    }
    .choice-btn.wrong {
        background: #FF7F7F !important;
    }

    .result {
        margin-top: 8px;
        font-weight: bold;
    }
</style>
</head>

<body>
    <h1>Day 4 â€“ Flashcards</h1>

    <div class="card" id="card">
        <div class="label" id="side-label">English</div>
        <div id="text-main"></div>
        <div id="text-sub"></div>
    </div>

    <div class="audio-buttons">
        <button class="small" id="speak-en">â–¶ï¸ English</button>
        <button class="small secondary" id="speak-ja">â–¶ï¸ æ—¥æœ¬èªï¼ˆèª­ã¿æ–¹ï¼‰</button>
    </div>

    <div class="buttons">
        <button id="prev" class="nav-btn">â† Prev</button>
        <button id="flip" class="secondary nav-btn">ğŸ”„ Flip</button>
        <button id="next" class="nav-btn">Next â†’</button>
        <button id="random" class="nav-btn">ğŸ”€ Random</button>
    </div>

    <div id="counter"></div>

    <div class="auto-options">
        <label>
            <input type="checkbox" id="auto-en" />
            Auto Englishï¼ˆã‚«ãƒ¼ãƒ‰è¡¨ç¤ºã”ã¨ã«ç™ºéŸ³ï¼‰
        </label>
    </div>

    <!-- QUIZ (1â€“30) -->
    <div class="question">
        <p>1. I</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) ã‚ãªãŸ</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) å½¼</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) ç§</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) å½¼å¥³</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>2. ç§</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) I</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) You</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) He</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) She</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>3. usually</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) æ™‚ã€…</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) ãŸã„ã¦ã„</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) ã„ã¤ã‚‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) æ¯æ—¥</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>4. ã„ã¤ã‚‚</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) always</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) sometimes</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) usually</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) rarely</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>5. at 7 o'clock</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) 7æ™‚ã«</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) 7æ™‚ã”ã‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) 7æ™‚ã‹ã‚‰</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) 7åˆ†ã«</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>6. ã¾ãš</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) first</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) then</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) after that</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) next</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>7. ãã®ã‚ã¨</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) after that</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) first</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) before</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) early</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>8. æœ</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) morning</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) afternoon</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) evening</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) night</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>9. åˆå¾Œ</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) morning</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) afternoon</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) evening</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) night</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>10. å¤•æ–¹</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) morning</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) afternoon</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) evening</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) night</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>11. kitchen</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) å±…é–“</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) æ´—é¢æ‰€</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) ã‚­ãƒƒãƒãƒ³</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) å»Šä¸‹</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>12. æœã”ã¯ã‚“ãƒ»æœé£Ÿ</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) snack</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>13. æ˜¼ã”ã¯ã‚“ãƒ»æ˜¼é£Ÿ</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) bread</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>14. æ™©ã”ã¯ã‚“ãƒ»å¤•é£Ÿ</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) snack</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>15. é£Ÿã¹ã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) eat</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) make</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) drink</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) cook</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>16. æœã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) eat breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) make breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) eat lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) cook breakfast</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>17. æ˜¼ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) eat breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) eat lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) make dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) buy lunch</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>18. æ™©ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) eat dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) make dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) eat lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) cook breakfast</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>19. ä½œã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) make</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) eat</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) cook</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) drink</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>20. æœã”ã¯ã‚“ã‚’ä½œã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) eat breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) make breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) cook breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) have breakfast</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>21. æ˜¼ã”ã¯ã‚“ã‚’ä½œã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) eat lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) make lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) cook lunch</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) buy lunch</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>22. æ™©ã”ã¯ã‚“ã‚’ä½œã‚‹</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) eat dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) make dinner</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) cook breakfast</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) buy dinner</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>23. ãƒ‘ãƒ³</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) bread</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) egg</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) rice</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) soup</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>24. åµ</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) rice</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) bread</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) eggs</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) meat</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>25. I usually eat breakfast at 7 o'clock.</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) ç§ã¯ãŸã„ã¦ã„7æ™‚ã«æœã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) ç§ã¯ã„ã¤ã‚‚7æ™‚ã«å¯ã‚‹ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) ç§ã¯æ™‚ã€…7æ™‚ã«é¡”ã‚’æ´—ã†ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) ç§ã¯ãŸã„ã¦ã„7æ™‚ã«æ™©ã”ã¯ã‚“ã‚’ä½œã‚‹ã€‚</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>26. ç§ã¯ãŸã„ã¦ã„7æ™‚ã«æœã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹ã€‚</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) I sometimes eat breakfast at 7 o'clock.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) I always make breakfast at 7 o'clock.</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) I usually eat breakfast at 7 o'clock.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) I get ready for school.</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>27. I make breakfast in the kitchen.</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) ç§ã¯æ´—é¢æ‰€ã§æœã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) ç§ã¯ã‚­ãƒƒãƒãƒ³ã§æœã”ã¯ã‚“ã‚’ä½œã‚‹ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) ç§ã¯å­¦æ ¡ã§æ˜¼ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) ç§ã¯å¤–ã§æœã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹ã€‚</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>28. ç§ã¯ã‚­ãƒƒãƒãƒ³ã§æœã”ã¯ã‚“ã‚’ä½œã‚‹ã€‚</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) I eat breakfast in the kitchen.</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(B) I make breakfast in the kitchen.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) I cook lunch in the kitchen.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) I clean the kitchen.</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>29. I feel tired in the morning.</p>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(A) ç§ã¯æœã«çœ ã„ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) ç§ã¯æœã«å…ƒæ°—ã ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(C) ç§ã¯æœã«ç–²ã‚ŒãŸã¨æ„Ÿã˜ã‚‹ã€‚</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) ç§ã¯æœã«ã”ã¯ã‚“ã‚’é£Ÿã¹ãªã„ã€‚</button>
        <p class="result"></p>
    </div>

    <div class="question">
        <p>30. ç§ã¯æœã«ç–²ã‚ŒãŸã¨æ„Ÿã˜ã‚‹ã€‚</p>
        <button class="choice-btn" onclick="checkAnswer(this,true)">(A) I feel tired in the morning.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(B) I feel tired in the evening.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(C) I always eat breakfast in the morning.</button>
        <button class="choice-btn" onclick="checkAnswer(this,false)">(D) I wake up late in the morning.</button>
        <p class="result"></p>
    </div>

    <script>
    /* Flashcards data */
    const cards = [
        { en:"feel", ja:"æ„Ÿã˜ã‚‹", read:"ã‹ã‚“ã˜ã‚‹", pron:"feel" },
        { en:"tired", ja:"ç–²ã‚ŒãŸ", read:"ã¤ã‹ã‚ŒãŸ", pron:"tired" },
        { en:"morning", ja:"æœ", read:"ã‚ã•", pron:"morning" },
        { en:"afternoon", ja:"åˆå¾Œ", read:"ã”ã”", pron:"afternoon" },
        { en:"evening", ja:"å¤•æ–¹", read:"ã‚†ã†ãŒãŸ", pron:"evening" },
        { en:"kitchen", ja:"ã‚­ãƒƒãƒãƒ³", read:"ãã£ã¡ã‚“", pron:"kitchen" },
        { en:"breakfast", ja:"æœã”ã¯ã‚“ï¼›æœé£Ÿ", read:"ã‚ã•ã”ã¯ã‚“", pron:"breakfast" },
        { en:"lunch", ja:"æ˜¼ã”ã¯ã‚“ï¼›æ˜¼é£Ÿ", read:"ã²ã‚‹ã”ã¯ã‚“", pron:"lunch" },
        { en:"dinner", ja:"æ™©ã”ã¯ã‚“ï¼›å¤•é£Ÿ", read:"ã°ã‚“ã”ã¯ã‚“", pron:"dinner" },
        { en:"eat", ja:"é£Ÿã¹ã‚‹", read:"ãŸã¹ã‚‹", pron:"eat" },
        { en:"eat breakfast", ja:"æœã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹", read:"ã‚ã•ã”ã¯ã‚“ã‚’ãŸã¹ã‚‹", pron:"eat breakfast" },
        { en:"eat lunch", ja:"æ˜¼ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹", read:"ã²ã‚‹ã”ã¯ã‚“ã‚’ãŸã¹ã‚‹", pron:"eat lunch" },
        { en:"eat dinner", ja:"æ™©ã”ã¯ã‚“ã‚’é£Ÿã¹ã‚‹", read:"ã°ã‚“ã”ã¯ã‚“ã‚’ãŸã¹ã‚‹", pron:"eat dinner" },
        { en:"make", ja:"ä½œã‚‹", read:"ã¤ãã‚‹", pron:"make" },
        { en:"make breakfast", ja:"æœã”ã¯ã‚“ã‚’ä½œã‚‹", read:"ã‚ã•ã”ã¯ã‚“ã‚’ã¤ãã‚‹", pron:"make breakfast" },
        { en:"make lunch", ja:"æ˜¼ã”ã¯ã‚“ã‚’ä½œã‚‹", read:"ã²ã‚‹ã”ã¯ã‚“ã‚’ã¤ãã‚‹", pron:"make lunch" },
        { en:"make dinner", ja:"æ™©ã”ã¯ã‚“ã‚’ä½œã‚‹", read:"ã°ã‚“ã”ã¯ã‚“ã‚’ã¤ãã‚‹", pron:"make dinner" },
        { en:"some", ja:"ã„ãã¤ã‹ã®", read:"ã„ãã¤ã‹ã®", pron:"some" },
        { en:"bread", ja:"ãƒ‘ãƒ³", read:"ã±ã‚“", pron:"bread" },
        { en:"eggs", ja:"åµ", read:"ãŸã¾ã”", pron:"eggs" }
    ];

    let index = 0;
    let isFront = true;

    const mainEl = document.getElementById("text-main");
    const subEl = document.getElementById("text-sub");
    const labelEl = document.getElementById("side-label");
    const counterEl = document.getElementById("counter");
    const autoEnCheckbox = document.getElementById("auto-en");
    const cardEl = document.getElementById("card");

    function updateCard(options = { fromUser:false }) {
        const card = cards[index];
        if (isFront) {
            labelEl.textContent = "English";
            mainEl.textContent = card.en;
            subEl.textContent = "";
        } else {
            labelEl.textContent = "æ—¥æœ¬èª";
            mainEl.textContent = card.ja;
            subEl.textContent = "èª­ã¿æ–¹: " + card.read;
        }
        counterEl.textContent = `Card ${index+1} / ${cards.length}`;

        if (options.fromUser && isFront && autoEnCheckbox.checked) {
            speak(card.pron || card.en, "en-US");
        }
    }

    function speak(text, lang) {
        if (!window.speechSynthesis) return;
        const u = new SpeechSynthesisUtterance(text);
        u.lang = lang;
        window.speechSynthesis.cancel();
        window.speechSynthesis.speak(u);
    }

    document.getElementById("speak-en").addEventListener("click", () => {
        const card = cards[index];
        speak(card.pron || card.en, "en-US");
    });

    document.getElementById("speak-ja").addEventListener("click", () => {
        const card = cards[index];
        speak(card.read || card.ja, "ja-JP");
    });

    document.getElementById("next").addEventListener("click", () => {
        index = (index + 1) % cards.length;
        isFront = true;
        animateCard();
        updateCard({ fromUser:true });
    });

    document.getElementById("prev").addEventListener("click", () => {
        index = (index - 1 + cards.length) % cards.length;
        isFront = true;
        animateCard();
        updateCard({ fromUser:true });
    });

    document.getElementById("flip").addEventListener("click", () => {
        isFront = !isFront;
        animateCard();
        updateCard({ fromUser:false });
    });

    document.getElementById("random").addEventListener("click", () => {
        let newIndex = index;
        if (cards.length > 1) {
            while (newIndex === index) {
                newIndex = Math.floor(Math.random() * cards.length);
            }
        }
        index = newIndex;
        isFront = true;
        animateCard();
        updateCard({ fromUser:true });
    });

    const colors = [
        "#f7d6b5","#ffe3c0","#f0cfa3","#ffe2b2","#e8cfae","#f7d7b5"
    ];

    function animateCard() {
        const randomColor = colors[Math.floor(Math.random()*colors.length)];
        cardEl.style.background = randomColor;
        cardEl.classList.remove("bounce");
        void cardEl.offsetWidth;
        cardEl.classList.add("bounce");
    }

    cardEl.addEventListener("click", animateCard);

    function checkAnswer(button, isCorrect) {
        const parent = button.closest(".question");
        const result = parent.querySelector(".result");

        parent.querySelectorAll(".choice-btn").forEach(btn => {
            btn.classList.remove("correct", "wrong");
        });

        if (isCorrect) {
            button.classList.add("correct");
            result.textContent = "âœ” Correct!";
            result.style.color = "green";
        } else {
            button.classList.add("wrong");
            result.textContent = "âœ˜ Wrong!";
            result.style.color = "red";
        }
    }

    window.checkAnswer = checkAnswer;

    updateCard();
    </script>
</body>
</html>
